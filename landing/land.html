<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>login</title>
</head>

<body>
  <div class="login">
    <form action="">
      <!-- for和输入标签中的ID进行捆绑 -->
      <label for="username">用户名:</label>
      <!-- h5新标签，默认暗示 -->
      <input type="text" name="username" id="username" placeholder="请输入用户名...">
      <label for="password">密码:</label>
      <input type="text" name="password" id="password" placeholder="请输入密码...">
      <input type="button" name="btn_login" value="登陆" id="btn_login">
    </form>
  </div>

  <script type="text/javascript">
    window.onload = function() {
      var Username = document.getElementById("username");
      var Password = document.getElementById("password");
      var Login = document.getElementById("btn_login");
      // 输入判定
      Login.onclick = function() {
        var uname = Username.value;
        var pword = Password.value;
        if (uname == "") {
          alert("请输入用户名");
        } else if (pword == "") {
          alert("请输入密码")
        } else {
          deliverData(uname, pword);
        }
      }
    }

    //串联数据
    function deliverData(uname, pword) {
      var data = "username=" + uname + "&password=" + pword;
      ajax("get", "Logindata.php", data, function(responseData) {
        alert(responseData);
      });
    }

    //ajax封装
    function ajax(method, url, data, fn) {
      var xhr = null;
      if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
      } else {
        xhr = new ActiveXObject('Micrisoft.XMLHttp');
      }
      if (method == "get" && data) {
        url += "?" + data;
      }
      //发送请求
      xhr.open(method, url, true);
      if (method == "get") {
        xhr.send();
      } else if (method == "post") {
        xhr.setRequestHeader("content-type", "applicaton/x-www-form-urlencoded");
        xhr.send(data);
      }

      //实时监听
      xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && status == 200) {  //4请求已完成且响应已经就绪，200服务器响应正常
          fn && fn(xhr.responseText);
        } else {
          alert("发生错误,Error:" + xhr.statusText);
        }
      }
    }
  </script>
</body>

</html>
