<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title> We don't talking any more </title>
</head>
<script src="vue.min.js"></script>
<script src="jquery-3.2.1.js"></script>
<style media="screen">
  * {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
  }

  body {
    front-family: "Microsoft YaHei";
    margin: 0;
  }

  img {
    margin: 20px auto;
    display: block;
    width: 200px;
    height: 200px;
  }

  .loading {
    background: lightblue;
    height: 5px;
    position: fixed;
    top: 0;
    z-index: 99999;
  }

  .left {
    background: #bfc;
    width: 20px;
    height: 50px;
    position: absolute;
  }

  .right {
    background: #acd;
    width: 100%;
    height: 50px;
    flex: 1;
  }

  .area {
    width: 200px;
    min-height: 50px;
    max-height: 150px;
    margin: 20px auto;
    border: 1px solid #ccc;
    overflow-x: hidden;
    overflow-y: auto;
    padding: 3px;
    font-size: 12px;
    /*在长单词或url地址内部换行*/
    word-wrap: break-word;
    font-family: sans-serif;
  }

  #tab {
    width: 600px;
    margin: 0 auto;
  }

  .tab-tit {
    font-size: 0;
    width: 600px;
  }

  .tab-tit a {
    display: inline-block;
    height: 40px;
    line-height: 40px;
    font-size: 16px;
    width: 25%;
    text-align: center;
    background: #ccc;
    color: #333;
    text-decoration: none;
  }

  .tab-tit .cur {
    background: #09f;
    color: #fff;
  }

  .tab-con div {
    border: 1px solid #ccc;
    height: 400px;
    padding-top: 20px;
  }
</style>

<body>
  <script type="text/javascript">
    // 输入绑定检测
    window.onload = function() {
      new Vue({
        el: '#app',
        data: {
          message: " hellow Vue! "
        }
      })

      // 选项卡代码
      new Vue({
        el: '#tab',
        data: {
          curID: 0
        },
        computed: {},
        methods: {},
        mounted: function() {}
      })

      // 文本框代码
      let form = $(".tweet-box")[0],
        leftwordcount = $("form.textMsg.value.maxlength");
      $(form.textMsg).on("input", function() {
        let wordscount = this.value.length;
        form.tweet.disabled = wordscount <= 0;
        let result = (20 - wordscount);
        // 打印值到html里面的id=re的元素里面!!!
        $(' #re ').html(result);
      }).trigger(" input ");

      //null
      var bar = null;
      console.log(typeof bar === "object");

      //问题1
      (function() {
        // 等同于 b = 3, var a = b, b是全局变量 a是局部变量
        var a = b = 3;
      })();
      console.log("a defined?" + (typeof a !== 'undefined'));
      console.log("b defined?" + (typeof b !== 'undefined'));

      // 问题2
      var myObject = {
        foo: "bar",
        func: function() {
          var self = this;
          console.log("this.foo = " + this.foo);
          console.log("self.foo = " + self.foo);
          (function() {
            //函数里面没有定义this，这里的this是最外层window对象
            console.log("里面的函数this是：" + this);
            console.log("this.foo = " + this.foo);
            //闭包可以访问父级，祖先及的变量，但这里this不是变量上面定义过
            console.log("self.foo = " + self.foo);
          }());
        }
      }
      myObject.func();

      //问题3
      console.log(typeof NaN === "number");
      console.log(NaN === NaN);
      console.log(isNaN(self));

      //问题4
      console.log(0.1 + 0.2);
      console.log(0.1 + 0.2 == 0.3);

      //问题5
      function isPalindrome(str) {
        //replace(/    /g,'替换的文本')
        str = str.replace(/W/g, '').toLowerCase();
        //split("选作分隔符的字符串")可以是空格，字母等,是将元素转换成 字符串！
        //join（“ ”）将数组里的全部元素转换成字符串输出，括号里填选作分隔符的字串
        return (str === str.split('').reverse().join(''));
      }
      console.log("level 反转之后:" + isPalindrome("level"));
      console.log("levef 反转之后:" + isPalindrome("levef"));
      console.log("l e v e l 反转之后:" + isPalindrome("l e v e l"));
      console.log(isPalindrome("A car, a man, a maraca"));

      //问题6 创建函数使得打印都能输出
      console.log(sum(2, 3));
      console.log(sum(2)(3));	//类似函数里面的函数写法

      // method 1
      // function sum(x, y) {
      //   if (y !== undefined) {
      //     return x + y;
      //   } else {
      //     return function( y ){
      //       return x + y;
      //     };
      //   }
      // }

      //method 2
      function sum(x) {
        if (arguments.length == 2) {
          return arguments[0] + arguments[1];
        } else {
          return function(y) {
            return x + y;
          }
        }
      }

      //问题7
      // for (var i = 0; i < 5; i++) {
      //   var btn = document.createElement('button');
      //   btn.appendChild(document.createTextNode('Button' + i));
      //   btn.addEventListener( 'click', function(){
      //     console.log( i );  //输出5
      //   });
      //   document.body.appendChild( btn );
      // }

      //method 1
      // ['a', 'b', 'c', 'd', 'e'].forEach(function(value, i) {
      //   var btn = document.createElement('button');
      //   btn.appendChild(document.createTextNode('Button' + i));
      //   btn.addEventListener('click', function() {
      //     console.log(i);
      //   });
      //   document.getElementById('press-button').appendChild(btn);
      // })

      //method 1 用call来调用
        var list = ['a', 'b', 'c', 'd', 'e'];
        [].forEach.call(list, function(value, i) {
        var btn = document.createElement('button');
        btn.appendChild(document.createTextNode('Button' + i));
        btn.addEventListener('click', function() {
          console.log(i);
        });
        document.getElementById('press-button').appendChild(btn);         
        })


      //method 2
      // for (var i = 0; i < 5; i++) {
      //   var btn = document.createElement('button');
      //   btn.appendChild(document.createTextNode('Button' + i));
      //   btn.addEventListener( 'click', (function( i ){
      //     return function() {console.log( i );};
      //   })(i));
      //   document.body.appendChild( btn );
      // }

      //method 3
      // for (var i = 0; i < 5; i++) {
      //   var btn = document.createElement('button');
      //   btn.appendChild(document.createTextNode('Button' + i));
      //   (function (i) {
      //     btn.addEventListener( 'click', function(){
      //       console.log( i );
      //     });
      //   })(i);
      //   document.body.appendChild( btn );
      // }


      // 问题8
      var arr1 = "john".split('');
      var arr2 = arr1.reverse();
      var arr3 = "jones".split('');
      arr2.push(arr3);
      // slice()；选取所填下标到最后下标之间的元素
      console.log("arr1.slice(-1):" + arr1.slice(-1) + "\n" + "arr2:" + arr2);

      //问题9
      console.log(1 + "2" + "3");
      console.log(1 + +"2" + "3");
      console.log(1 + -"2" + "3");
      console.log(+"1" + +"2" + "3");
      console.log("1" + +"2" + "3");
      console.log("A" - "B" + "2");

      //闭包 最里面的函数可以访问外部变量全局变量
      var globalVar = "xyz";
      (function outerFunc(outerArg) {
        var outerVar = "a";
        (function innerFunc(innerArg) {
          var innerVar = "b";
          console.log(
            "outerArg = " + outerArg + "\n" +
            "innerArg = " + innerArg + "\n" +
            "outerVar = " + outerVar + "\n" +
            "innerVar = " + innerVar + "\n" +
            "globalVar = " + globalVar
          );
        })(456); //如果没有这个（）则里面的内容和功能函数无法调用,内容则是传递的参数
      })(123);

      //问题10,用闭包解决捕捉每次i的值，把i的值传递给x
      for (var i = 0; i < 5; i++) {
        (function(x) {
          setTimeout(function() {
            // console.log(x);
          }, 0)  //x * 1000
        })(i);
      }
      console.log("0 == flase:" + (0 == false));
      console.log("0 === flase:" + (0 === false));
      console.log("false类型：" + typeof(false));

      //对象
      var aa = {},
        bb = {
          key: 'b'
        },
        cc = {
          key: 'c'
        };
      aa[bb] = 123;
      aa[cc] = 456;
      //js会暗中字符串化参数值
      console.log("有值的对象给aa空对象后，aa里面都是作为：" + aa);
      console.log(aa[bb]);

      //阶乘
      //method 1
      console.log("3!是:" + (function f(n) {
        return (n > 1 ? n * f(n - 1) : 1)
      })(3));
      //method 2
      var ss = (function ff(j) {
        if (j > 1) {
          return j * ff(j - 1);
        } else {
          return 1;
        }
      })(6);
      console.log("6!是:" + ss);

      //用div实现的textarea
      $('#Area').on("input", function() {
        let ar = $('#Area').text().length;
        let result = 200 - ar;
        $('#Ar').html(result);
      })

      //网页加载条实现
      $('.loading').fadeOut();

      //网页懒加载lazyloading
      //获取图片
      var imgs = document.querySelectorAll('img'),
        //获取 浏览器可视区域高度
        H = window.innerHeight;
      window.onload = window.onscroll = function() {
        //获取 滚动条滚过的高度
        S = document.documentElement.scrollTop || document.body.scrollTop;
        //。call的首个参数替换forEach左边的空数组,function(对应索引的值，下标索引)
        [].forEach.call(imgs, function(img) {
          if (!img.getAttribute('data-src')) {
            return
          }

          //getTop(img) 获取图片距离顶部的距离
          if (getTop(img) < (H + S - 500)) {
            img.src = img.getAttribute("data-src");
            img.removeAttribute("data-src");
          }
        })
      }
      //获取元素距离顶部高度的方法
      function getTop(e) {
        var t = e.offsetTop; //真正获取的函数
        while (e = e.offsetParent) {
          t += e.offsetTop;
        }
        return t
      }








    }
  </script>



  <div class="loading"></div>
  <div style="margin: 0 auto; width: 200px;" id="app">
    <p>{{ message }}</p>
    <input v-model="message">
  </div>
  <!-- 选项卡 -->
  <div id="tab">
    <div class="tab-tit">
      <!-- 当点击后便赋值对应的curID，curID完全等值后class便渲染对应项 -->
      <a href="javascript:;" @click=" curID=0 " :class="{'cur':curID===0}">html</a>
      <a href="javascript:;" @click=" curID=1 " :class="{'cur':curID===1}">css</a>
      <a href="javascript:;" @click=" curID=2 " :class="{'cur':curID===2}">javascript</a>
      <a href="javascript:;" @click=" curID=3 " :class="{'cur':curID===3}">vue</a>
    </div>
    <div class="tab-con">
      <!-- curID完全相等便显示对应的内容 -->
      <div v-show="curID===0">
        html <br/>
      </div>
      <div v-show="curID===1">
        css <br/>
      </div>
      <div v-show="curID===2">
        javascript <br/>
      </div>
      <div v-show="curID===3">
        vue <br/>
      </div>
    </div>
  </div>

  <!-- 文字框 -->
  <form style=" margin: 0 auto; width: 600px;" class="tweet-box">
    <textarea rows="5" cols="25" maxlength="20" name="textMsg" value="<script>alert('haha')</script>"></textarea>
    <input disabled type="submit" name="tweet" value="The shaoe of U">
    <p> 剩余:
      <text id="re"></text>
    </p>
  </form>

  <!-- 添加button -->
  <div id="press-button"></div>

  <!-- 用div模拟texxtarea -->
  <div contenteditable="true" class="area" id="Area"></div>
  <p style="margin: 20px auto; width: 200px;">剩余:<text id="Ar"></text></p>

  <!-- 左边固定，右边自适应 -->
  <div class="left"></div>
  <div class="right"></div>


  <!-- 网页进度条 -->
  <!-- 页头部分 -->
  <div id="header"></div>
  <script type="text/javascript">
    $('.loading').animate({
      'width': '33%'
    }, 50);
  </script>
  <!-- 左侧内容 -->
  <div id="mainpage"></div>
  <script type="text/javascript">
    $('.loading').animate({
      'width': '50%'
    }, 50, );
  </script>
  <!-- 右侧内容 -->
  <div id="sider"></div>
  <script type="text/javascript">
    $('.loading').animate({
      'width': '80%'
    }, 50);
  </script>
  <!-- 页脚部分 -->
  <div id="footer"></div>
  <script type="text/javascript">
    $('.loading').animate({
      'width': '100%'
    }, 50);
  </script>


  <!-- 网页懒加载 -->
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">
  <img src=" " data-src="http://ww4.sinaimg.cn/large/006y8mN6gw1fa5obmqrmvj305k05k3yh.jpg" alt="">










</body>

</html>
